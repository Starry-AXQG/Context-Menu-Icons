@media (-moz-pref("svg.context-properties.content.enabled")) {
  

  /*FluentUI*/
  @media (not (-moz-pref("cmi-Switch-Icon-Package", 0)))
    and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) {

  .subviewbutton {
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;
  }
  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > #cmi-show-more-menupopup > menuitem,
  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > menupopup
    > menuitem:not(
      .menuitem-iconic,
      [type="checkbox"],
      [type="radio"],
      .in-menulist,
      .in-menulist menuitem,
      .unified-nav-current
    ),
  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > #cmi-show-more-menupopup, menupopup
    > menu:not(
      .menu-iconic,
      [type="checkbox"],
      [type="radio"],
      .in-menulist,
      .in-menulist menu,
      .unified-nav-current
    ),
  #toggle_toolbar-menubar,
  #PanelUI-history toolbarbutton,
  #unified-extensions-context-menu {
    background-image: var(--menu-image) !important;
    background-size: 16px !important;
    background-position: var(--fp-contextmenu-menuitem-padding-inline) center !important;
    background-repeat: no-repeat !important;
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;
  }  
  menuitem.sine-moved,
  menuitem[id$="-sine-clone"],
  menuitem[class*="sine"] {
      background-image: var(--menu-image) !important;
      background-size: 16px !important;
      background-position: var(--fp-contextmenu-menuitem-padding-inline) center !important;
      background-repeat: no-repeat !important;
      -moz-context-properties: fill, fill-opacity !important;
      fill: currentColor !important;
  }  
      
      #back-button {
        list-style-image: url("arrow-left.svg") !important;
      }
      
      #forward-button {
        list-style-image: url("arrow-right.svg") !important;
      }
      
      #reload-button {
        list-style-image: url("reload.svg") !important;
      }
      
      #stop-button,
      .close-icon {
        list-style-image: url("close.svg") !important;
      }
      
      #sidebar-button {
        list-style-image: url("sidebars-right.svg") !important;
      }
      
      #sidebar-button:-moz-locale-dir(ltr):not([positionend]),
      #sidebar-button:-moz-locale-dir(rtl)[positionend] {
        list-style-image: url("sidebars.svg") !important;
      }
      
      #nav-bar-overflow-button {
        list-style-image: url("chevron.svg") !important;
      }
      
      #PanelUI-menu-button {
        list-style-image: url("menu.svg") !important;
      }
      
      #new-tab-button {
        list-style-image: url("new-tab.svg") !important;
      }
      
      #sync-button,
      .urlbarView-row[source="tabs"]
        > .urlbarView-row-inner
        > .urlbarView-no-wrap
        > .urlbarView-favicon,
      #urlbar-engine-one-off-item-tabs {
        list-style-image: url("tab.svg") !important;
      }
      
      #history-panelmenu,
      .urlbarView-row[source="history"]
        > .urlbarView-row-inner
        > .urlbarView-no-wrap
        > .urlbarView-favicon,
      #urlbar-engine-one-off-item-history,
      #sidebar-switcher-history,
      #sidebar-box[sidebarcommand="viewHistorySidebar"]
        > #sidebar-header
        > #sidebar-switcher-target
        > #sidebar-icon {
        list-style-image: url("history.svg") !important;
      }
      
      #save-page-button {
        list-style-image: url("save.svg") !important;
      }
      
      #print-button {
        list-style-image: url("print.svg") !important;
      }
      
      .searchbar-search-icon {
        list-style-image: url("search-glass.svg") !important;
      }
      
      #find-button {
        list-style-image: url("search-page.svg") !important;
      }
      
      #open-file-button {
        list-style-image: url("open.svg") !important;
      }
      
      #zoom-out-button {
        list-style-image: url("zoom-out.svg") !important;
      }
      
      #zoom-in-button,
      #tabs-newtab-button,
      #TabsToolbar #new-tab-button {
        list-style-image: url("plus.svg") !important;
      }
      
      #cut-button {
        list-style-image: url("edit-cut.svg") !important;
      }
      
      #copy-button {
        list-style-image: url("edit-copy.svg") !important;
      }
      
      #paste-button {
        list-style-image: url("edit-paste.svg") !important;
      }
      
      #email-link-button {
        list-style-image: url("mail.svg") !important;
      }
      
      #screenshot-button {
        list-style-image: url("screenshot.svg") !important;
      }
      
      .search-setting-button > .button-box > .button-icon,
      .unified-extensions-item-open-menu.subviewbutton,
      #preferences-button {
        list-style-image: url("settings.svg") !important;
      }
      
      #spell-check-enabled {
        --menu-image: url("spell-check.svg");
      }
      #panic-button {
        list-style-image: url("forget.svg") !important;
      }
      
      #privatebrowsing-button {
        list-style-image: url("privateBrowsing.svg") !important;
      }
      
      #save-to-pocket-button {
        list-style-image: url("pocket-outline.svg") !important;
      }
      
      #profiler-button-button > .toolbarbutton-icon,
      .subviewbutton[label="Task Manager"] {
        list-style-image: url("tool-profiler.svg") !important;
      }
      
      #developer-button {
        list-style-image: url("debug.svg") !important;
      }
      
      #new-window-button {
        list-style-image: url("window.svg") !important;
      }
      
      #restore-button,
      #fullscreen-button {
        list-style-image: url("fullscreen.svg") !important;
      }
      
      #restore-button[checked],
      #fullscreen-button[checked] {
        list-style-image: url("fullscreen-exit.svg") !important;
      }
      
      #bookmarks-menu-button,
      #sidebar-switcher-bookmarks,
      #sidebar-box[sidebarcommand="viewBookmarksSidebar"]
        > #sidebar-header
        > #sidebar-switcher-target
        > #sidebar-icon {
        list-style-image: url("bookmark-star-on-tray.svg") !important;
      }
      
      /* identity icons */
      #identity-icon {
        list-style-image: url("info.svg") !important;
      }

      #identity-box[pageproxystate="valid"].localResource #identity-icon {
        list-style-image: url("page-portrait.svg") !important;
      }
      
      #urlbar:not(.searchButton)
        > #urlbar-input-container
        > #identity-box[pageproxystate="invalid"]
        #identity-icon {
        list-style-image: url("search-glass.svg") !important;
      }
      
      #urlbar[actiontype="extension"]
        > #urlbar-input-container
        > #identity-box
        #identity-icon,
      #identity-box[pageproxystate="valid"].extensionPage #identity-icon {
        list-style-image: url("extension.svg") !important;
      }
      
      #identity-box[pageproxystate="valid"].verifiedDomain #identity-icon,
      #identity-box[pageproxystate="valid"].mixedActiveBlocked #identity-icon {
        list-style-image: url("security.svg") !important;
      }
      
      #urlbar-input-container[pageproxystate="valid"]
        > #tracking-protection-icon-container
        > #tracking-protection-icon-box
        > #tracking-protection-icon {
        list-style-image: url("tracking-protection.svg") !important;
      }
      
      /* security */
      .identity-popup-security-connection {
        list-style-image: url("security-broken.svg") !important;
      }
      
      #identity-box[pageproxystate="valid"].notSecure #identity-icon,
      #identity-box[pageproxystate="valid"].mixedActiveContent #identity-icon,
      #identity-box[pageproxystate="valid"].httpsOnlyErrorPage #identity-icon {
        list-style-image: url("security-broken.svg") !important;
      }
    
      #identity-popup[connection="file"] .identity-popup-security-connection {
        list-style-image: url("page-portrait.svg") !important;
      }
      
      #identity-popup[connection^="secure"] .identity-popup-security-connection {
        list-style-image: url("security.svg") !important;
      }
      
      #identity-popup[ciphers="weak"] .identity-popup-security-connection,
      #identity-popup[mixedcontent~="passive-loaded"][isbroken]
        .identity-popup-security-connection,
      #identity-popup[connection="secure-cert-user-overridden"]
        .identity-popup-security-connection,
      #identity-popup[connection="cert-error-page"]
        .identity-popup-security-connection {
        list-style-image: url("security-warning.svg") !important;
      }
      
      #identity-popup[connection="net-error-page"]
        .identity-popup-security-connection {
        list-style-image: url("info.svg") !important;
      }
      
      #identity-popup[connection="extension"] .identity-popup-security-connection {
        list-style-image: url("extension.svg") !important;
      }
      
      .findbar-find-previous {
        list-style-image: url("arrow-up.svg") !important;
      }
      
      .findbar-find-next {
        list-style-image: url("arrow-down.svg") !important;
      }
      
      #protections-popup-mainView .subviewbutton-nav:not(.notFound)::after,
      #identity-popup-mainView .subviewbutton-nav::after,
      .widget-overflow-list .subviewbutton-nav::after,
      .PanelUI-subView .subviewbutton-nav::after,
      .menu-right {
        content: url("arrow-right.svg") !important;
      }
      
      #PlacesChevron,
      #urlbar-go-button {
        list-style-image: url("arrow-right.svg") !important;
      }
      
      .panel-header > .subviewbutton-back {
        list-style-image: url("arrow-left.svg") !important;
      }
      
      #overflowMenu-customize-button,
      #appmenu-moreTools-button {
        list-style-image: url("customize.svg") !important;
      }      
      
      #zen-copy-url-button > .urlbar-icon {
        background-position: center !important; 
        list-style-image:  url("link.svg") !important;
      }
      #translations-button-icon {
        background-position: center !important; 
        list-style-image:  url("translations.svg") !important;      
      }
      
      #pageAction-panel-bookmark,
      #star-button {
        width: 16px;
        height: 16px;    
        background-image: url("bookmark-hollow.svg") !important;
        background-repeat: no-repeat !important;
        background-position: center !important;     
        background-size: 17px 17px !important;
      }

      #pageAction-panel-bookmark[starred],
      #star-button[starred] {
        width: 16px;
        height: 16px;        
        background-image: url("bookmark.svg") !important;
        background-repeat: no-repeat !important;
        background-position: center !important;        
        background-size: 17px 17px !important;
      }
      
      #zen-site-data-icon-button >image {
              list-style-image: url("permissions.svg") !important;
              background-position: center !important;
      }
      
      #sidebar-box[sidebarcommand="viewTabsSidebar"]
        > #sidebar-header
        > #sidebar-switcher-target
        > #sidebar-icon,
      #sidebar-switcher-tabs {
        list-style-image: url("send-to-device.svg") !important;
      }
      
      /* tab icons */
      .tab-icon-image[src="chrome://branding/content/icon32.png"],
      .tab-icon-image[src="chrome://browser/skin/privatebrowsing/favicon.svg"] {
        content: url("new-tab-image.svg") !important;
      }
      
      .tab-icon-image[src="chrome://global/skin/icons/settings.svg"] {
        content: url("settings.svg") !important;
      }
      
      .tab-icon-image[src="chrome://mozapps/skin/extensions/extension.svg"] {
        content: url("extension.svg") !important;
      }
      
      .tab-icon-image[src="chrome://browser/skin/customize.svg"] {
        content: url("customize.svg") !important;
      }
      
      /* permissions */
      #permissions-granted-icon {
        list-style-image: url("permissions.svg") !important;
      }
      
      .geo-icon {
        list-style-image: url("geo.svg") !important;
      }
      
      .geo-icon.blocked-permission-icon {
        list-style-image: url("geo-blocked.svg") !important;
      }
      
      .xr-icon {
        list-style-image: url("xr.svg") !important;
      }
      
      .xr-icon.blocked-permission-icon {
        list-style-image: url("xr-blocked.svg") !important;
      }
      
      .popup-notification-icon[popupid="web-notifications"],
      .desktop-notification-icon {
        list-style-image: url("desktop-notification.svg") !important;
      }
      
      .desktop-notification-icon.blocked-permission-icon {
        list-style-image: url("desktop-notification-blocked.svg") !important;
      }
      
      .camera-icon {
        list-style-image: url("camera.svg") !important;
      }
      
      .camera-icon.blocked-permission-icon {
        list-style-image: url("camera-blocked.svg") !important;
      }
      
      .microphone-icon {
        list-style-image: url("microphone.svg") !important;
      }
      
      .microphone-icon.blocked-permission-icon {
        list-style-image: url("microphone-blocked.svg") !important;
      }
      
      .screen-icon {
        list-style-image: url("screen.svg") !important;
      }
      
      .screen-icon.blocked-permission-icon {
        list-style-image: url("screen-blocked.svg") !important;
      }
      
      .popup-notification-icon[popupid="persistent-storage"],
      .persistent-storage-icon,
      .indexedDB-icon {
        list-style-image: url("persistent-storage.svg") !important;
      }
      
      .persistent-storage-icon.blocked-permission-icon {
        list-style-image: url("persistent-storage-blocked.svg") !important;
      }
      
      .popup-icon {
        list-style-image: url("popup.svg") !important;
      }
      
      .autoplay-media-icon {
        list-style-image: url("autoplay-media.svg") !important;
      }
      
      .autoplay-media-icon.blocked-permission-icon {
        list-style-image: url("autoplay-media-blocked.svg") !important;
      }
      
      #canvas-notification-icon,
      .popup-notification-icon[popupid="canvas-permissions-prompt"],
      .canvas-icon {
        list-style-image: url("canvas.svg") !important;
      }
      
      .canvas-icon.blocked-permission-icon {
        list-style-image: url("canvas-blocked.svg") !important;
      }
      
      .midi-icon,
      .midi-sysex-icon,
      .popup-notification-icon[popupid="midi"],
      .popup-notification-icon[popupid="midi-sysex"] {
        list-style-image: url("midi-blocked.svg") !important;
      }
      
      .install-icon {
        list-style-image: url("extension.svg") !important;
      }
      
      .install-icon.blocked-permission-icon,
      .popup-notification-icon[popupid="xpinstall-disabled"],
      .popup-notification-icon[popupid="addon-install-blocked"],
      .popup-notification-icon[popupid="addon-install-origin-blocked"] {
        list-style-image: url("extension-blocked.svg") !important;
      }
      
      #unified-extensions-manage-extensions {
        list-style-image: url("debug.svg") !important;
      }
      
      /* Context Menu Icons */
      menupopup > menuitem:is([checked="true"], [selected="true"]) .menu-iconic-icon {
        list-style-image: url("checkmark.svg") !important;
      }
  /*   （v1.9.4)    
      #context-video-pictureinpicture:not([checked="true"]) .menu-iconic-icon {
        list-style-image: url("media-pip.svg") !important;
      }
      
      #context-media-loop:not([checked="true"]) .menu-iconic-icon {
        list-style-image: url("media-loop.svg") !important;
      }
  */ 
      #context-video-pictureinpicture {
        --menu-image: url("media-pip.svg");
      }   
      #context-media-loop {
        --menu-image: url("media-loop.svg");
      }

      #context-savepage {
        --menu-image: url("save.svg");
      }
      
      #context-selectall,
      #context_selectAllTabs,
      #toolbar-context-selectAllTabs {
        --menu-image: url("edit-select-all.svg");
      }
      
      #context-undo,
      #context_undoCloseTab,
      #toolbar-context-undoCloseTab {
        --menu-image: url("edit-undo.svg");
      }
      
      #context_unloadTab,
      #context_zenUnloadWorkspace {
        --menu-image: url("unloadTab.svg");
      }
      
      #viewColumns,
      #toggle_toolbar-menubar {
        --menu-image: url("menu-bar.svg");
      }
      
      #context-redo {
        --menu-image: url("edit-redo.svg");
      }
      
      #context-copy,
      .textbox-contextmenu #strip-on-share,
      #placesContext_copy {
        --menu-image: url("edit-copy.svg");
      }
      
      #context-paste,
      #placesContext_paste_group {
        --menu-image: url("edit-paste.svg");
      }
      #placesContext_paste,
      #context-paste-no-formatting {
        --menu-image: url("edit-paste.svg");
      }      
      .textbox-contextmenu menuitem.searchbar-paste-and-search {
        --menu-image: url("edit-paste.svg");
      }

      .textbox-contextmenu menuitem.searchbar-clear-history {
        --menu-image: url("edit-delete.svg");
      }
      #context-cut,
      #placesContext_cut {
        --menu-image: url("edit-cut.svg");
      }

      #placesContext_open {
        --menu-image: url("ext-link.svg");
      }      
      #placesContext_openContainer\:tabs {
        --menu-image: url("tab.svg");
      }
      
      #placesContext_showInFolder {
        --menu-image: url("folder-open.svg");
      }
      #placesContext_removeTag {
        --menu-image: url("edit-delete.svg");
      }
      
      #viewSort,
      #placesContext_sortBy\:name {
          --menu-image: url("sort.svg");
      }
      #context-delete,
      .customize-context-removeExtension,
      .unified-extensions-context-menu-remove-extension,
      menuitem[id="placesContext_deleteBookmark"],
      menuitem[id="placesContext_deleteFolder"],
      menuitem[id="placesContext_delete"],
      menuitem[id="placesContext_delete_history"],
      menuitem[id="placesContext_deleteHost"] {
        --menu-image: url("edit-delete.svg");
      }
      
      #paste-and-go {
        --menu-image: url("paste-and-go.svg");
      }
      
      #context-print-selection {
        --menu-image: url("print.svg");
      }
      
      #context-take-screenshot {
        --menu-image: url("screenshot.svg");
      }
      
      #context-ask-chat,
      #context_askChat {
        --menu-image: url("AI-chat.svg");
      }
      #context-previewlink {
        --menu-image: url("AI-summarize.svg");
      }
      
      #context-viewsource {
        --menu-image: url("source-code.svg");
      }
      
      #context-inspect-a11y {
        --menu-image: url("accessibility.svg");
      }
      
      #context-inspect {
        --menu-image: url("inspect.svg");
      }
      
      #context-searchselect {
        --menu-image: url("search-glass.svg");
      }
      #context-searchselect-private {
          --menu-image: url("search-glass.svg");
      }

      #context-add-engine {
        --menu-image: url("search-add.svg");
      }

      #context-translate-selection {
          --menu-image: url("translations.svg");
      }
      #context-viewimage {
        --menu-image: url("image-open.svg");
      }
      #context-viewimageinfo {
        --menu-image: url("info.svg");
      }
      #context-saveimage,
      #context-video-saveimage {
        --menu-image: url("image-save.svg");
      }
      
      #context-savevideo {
        --menu-image: url("video-save.svg");
      }
      
      #context-viewvideo {
        --menu-image: url("video-open.svg");
      }
      
      #context-saveaudio {
        --menu-image: url("audio-save.svg");
      }
      
      #context-copyimage-contents {
        --menu-image: url("image-copy.svg");
      }
      
      #context-copyimage,
      #context-copyvideourl,
      #context-copylink,
      #context-stripOnShareLink,
      #context-pdfjs-copy {
        --menu-image: url("link.svg");
      }
      #context-openlinkincurrent {
        --menu-image: url("ext-link.svg");
      }
      
      #context-viewsource,
      #context-viewframesource,
      #context-viewpartialsource-selection {
        --menu-image: url("source-code.svg");
      }
      
      #context-sendimage,
      #context-sendvideo,
      #context-sendaudio {
        --menu-image: url("mail.svg");
      }
      
      #context-setDesktopBackground,
      #toolbar-context-customize,
      #toolbar-context-customize-sidebar {
        --menu-image: url("customize.svg");
      }
      
      #context-reloadimage,
      #context_reloadTab,
      #context_reloadSelectedTabs,
      #toolbar-context-reloadSelectedTab,
      #toolbar-context-reloadSelectedTabs {
        --menu-image: url("reload.svg");
      }
      
      #context-sendlinktodevice,
      #context_sendTabToDevice,
      #context-sendpagetodevice {
        --menu-image: url("send-to-device.svg");
      }
      
      #context-openlinkintab,
      #context-openlinkincontainertab,
      menuitem[id="placesContext_open:newtab"],
      menuitem[id="placesContext_openLinks:tabs"],
      menuitem[id="placesContext_openBookmarkLinks:tabs"],
      menuitem[id="placesContext_openBookmarkContainer:tabs"] {
        --menu-image: url("tab.svg");
      }
      
      #context_openANewTab,
      #toolbar-context-openANewTab {
        --menu-image: url("new-tab-image.svg");
      }
      
      #context_moveTabToGroup,
      #context_moveTabToNewGroup {
        --menu-image: url("TabGroup-add.svg");
      }
        
      #context_ungroupTab {
        --menu-image: url("TabGroup-remove.svg");
      }
      
      #context-openlinkinusercontext-menu,
      menu[id="placesContext_open:newcontainertab"],
      menu[id="placesContext_openContainer:tabs"] {
        --menu-image: url("container-tab.svg");
      }
      
      #context-openlink,
      menuitem[id="placesContext_open:newwindow"] {
        --menu-image: url("window.svg");
      }
      
      #context-openlinkprivate,
      menuitem[id="placesContext_open:newprivatewindow"] {
        --menu-image: url("private-window.svg");
      }
      
      #context-savelink {
        --menu-image: url("downloads.svg");
      }
      
      #spell-add-to-dictionary,
      #spell-add-dictionaries,
      #spell-dictionaries {
        --menu-image: url("add-to-dictionary.svg");
      }
      
      #manage-saved-logins {
        --menu-image: url("passwords.svg");
      }
      
      #context-media-play,
      #context_playTab,
      #context_playSelectedTabs {
        --menu-image: url("media-play.svg");
      }
      
      #context-media-pause {
        --menu-image: url("media-pause.svg");
      }
      
      #context-media-mute,
      #context_toggleMuteTab,
      #context_toggleMuteSelectedTabs {
        --menu-image: url("media-mute.svg");
      }
      
      #context-media-unmute,
      #context_toggleMuteTab[muted],
      #context_toggleMuteSelectedTabs[muted] {
        --menu-image: url("media-unmute.svg");
      }
      
      #context-media-playbackrate {
        --menu-image: url("media-speed.svg");
      }
      
      #context-video-fullscreen {
        --menu-image: url("fullscreen.svg");
      }
      
      #context-leave-dom-fullscreen,
      menuitem[contexttype="fullscreen"][label*="Exit"] {
        --menu-image: url("fullscreen-exit.svg");
      }
      
      #context-media-hidecontrols,
      #context-media-showcontrols {
        --menu-image: url("permissions.svg");
      }
      
      #context_pinTab,
      #context_pinSelectedTabs,
      .customize-context-moveToPanel {
        --menu-image: url("pin.svg"); 
      }
      
      #context_unpinTab,
      #context_unpinSelectedTabs {
        --menu-image: url("unpin.svg"); 
      }
      .customize-context-removeFromToolbar {
        --menu-image: url("unpin.svg");
      }
      #context_duplicateTab,
      #context_duplicateTabs {
        --menu-image: url("duplicate-tab.svg");
      }
      
      #context_bookmarkTab,
      #context_bookmarkSelectedTabs,
      #toggle_PersonalToolbar,
      #context-bookmarklink,
      #toolbar-context-bookmarkSelectedTab,
      #toolbar-context-bookmarkSelectedTabs,
      #placesContext_createBookmark {
        --menu-image: url("bookmark-hollow.svg");
      }
      
      menuitem[id="placesContext_show_bookmark:info"],
      menuitem[id="placesContext_show_folder:info"],
      menuitem[id="placesContext_show:info"] {
        --menu-image: url("edit.svg");
      }
      
      menuitem[id="placesContext_showAllBookmarks"],
      #BMB_bookmarksShowAllTop,
      #BMB_bookmarksShowAll,
      .customize-context-manageExtension,
      .unified-extensions-context-menu-manage-extension {
        --menu-image: url("debug.svg");
      }
      #BMB_viewBookmarksSidebar {
        --menu-image: url("sidebars.svg");
      }
      #BMB_searchBookmarks {
        --menu-image: url("search-page.svg");
      }
      
      #PanelUI-historyMore {
        --menu-image: url("debug.svg");
      }
      
      menuitem[id="placesContext_new:bookmark"],
      menuitem[id="placesContext_new:folder"],
      menuitem[id="placesContext_new:separator"],
      #newbookmark,
      #newfolder,
      #newseparator {
        --menu-image: url("plus.svg");
      }
      
      #context-savelinktopocket,
      #context-pocket {
        --menu-image: url("pocket-outline.svg");
      }
      
      #context_moveTabOptions {
        --menu-image: url("move-tab.svg");
      }
      
      .share-tab-url-item {
        --menu-image: url("share.svg");
      }
      
      #context_reopenInContainer {
        --menu-image: url("container-tab.svg");
      }
      
      #context_closeTab,
      #context_closeDuplicateTabs,
      #orgClose {
        --menu-image: url("close.svg");
      }
      #context_closeTabOptions {
        --menu-image: url("close-all.svg");
      }
      .customize-context-reportExtension,
      .unified-extensions-context-menu-report-extension {
        --menu-image: url("report.svg");
      }
      
      .panel-header > h1 {
        text-align: left;
        margin-left: 8px !important;
      }
      
      .panel-header > h1 > span::before {
        content: "";
        background: var(--header-image, none) center / 16px no-repeat;
        -moz-context-properties: fill, fill-opacity;
        fill: currentColor;
        padding-inline-start: calc(var(--fp-enabled, 0) * 16px);
        margin-inline-end: calc(var(--fp-enabled, 0) * 8px);
      }
      
      #PanelUI-fxa .panel-header > h1 > span::before {
        --header-image: var(--avatar-image-url);
        --fp-enabled: 1;
        transform: scale(1.25);
        border-radius: 99px;
        display: inline-block;
        height: 16px;
      }
      
      #PanelUI-bookmarks .panel-header > h1 > span::before {
        --header-image: url("bookmark-star-on-tray.svg");
        --fp-enabled: 1;
      }
      
      #PanelUI-history .panel-header > h1 > span::before {
        --header-image: url("history.svg");
        --fp-enabled: 1;
      }
      
      #PanelUI-helpView .panel-header > h1 > span::before {
        --header-image: url("help.svg");
        --fp-enabled: 1;
      }
      
      #appMenu-libraryView .panel-header > h1 > span::before {
        --header-image: url("library.svg");
        --fp-enabled: 1;
      }
      
      #unified-extensions-panel .panel-header > h1 > span::before {
        --header-image: url("extension.svg");
        --fp-enabled: 1;
      }
      .unified-extensions-context-menu-pin-to-toolbar {
        --menu-image: url("pin.svg");
      }
      .unified-extensions-context-menu-move-widget-down {
        --menu-image: url("arrow-down.svg");
      }
      .unified-extensions-context-menu-move-widget-up {
        --menu-image: url("arrow-up.svg");
      }

      /* App Menu */
      #appMenu-downloads-button,
      #appMenu-library-downloads-button {
        list-style-image: url("downloads.svg") !important;
      }
    
      #appMenu-translate-button {
        list-style-image: url("translations.svg") !important;
      }
    
      #appMenu-zoom-controls {
        list-style-image: url("plus.svg") !important;
      }
    
      #appMenu-passwords-button,
      #password-notification-icon {
        list-style-image: url("passwords.svg") !important;
      }
    
      #appMenu-more-button2 {
        list-style-image: url("menu.svg") !important;
      }
    
      #appMenu-help-button2 {
        list-style-image: url("help.svg") !important;
      }
    
      #appMenu-quit-button2 {
        list-style-image: url("close.svg") !important;
      }
    
      #appMenu-report-broken-site-button {
        list-style-image: url("report.svg") !important;
      }
    
      #appMenu-history-button,
      #appMenu-library-history-button {
        list-style-image: url("history.svg") !important;
      }
    
      #appMenu-save-file-button2 {
        list-style-image: url("save.svg") !important;
      }
    
    
      #appMenu-print-button2 {
        list-style-image: url("print.svg") !important;
      }
    
    
      #appMenu-find-button2 {
        list-style-image: url("search-page.svg") !important;
      }
    
      #appMenu-extensions-themes-button {
        list-style-image: url("extension.svg") !important;
      }
    
      #appMenu-zoomReduce-button2 {
        list-style-image: url("zoom-out.svg") !important;
      }
    
      #appMenu-zoomEnlarge-button2 {
        list-style-image: url("plus.svg") !important;
      }
    
      #appMenu-new-window-button2 {
        list-style-image: url("window.svg") !important;
      }
    
      #appMenu-new-private-window-button2 {
        list-style-image: url("private-window.svg") !important;
      }
      
      #appMenu-fullscreen-button2 {
        list-style-image: url("fullscreen.svg") !important;
      }
      #appMenu-fullscreen-button2[checked] {
        list-style-image: url("fullscreen-exit.svg") !important;
      }
    
      #appMenu-bookmarks-button,
      #appMenu-library-bookmarks-button {
        list-style-image: url("bookmark-star-on-tray.svg") !important;
      }
    
      #appMenu-new-tab-button2 {
        list-style-image: url("new-tab-image.svg") !important;
      }
    
      #appMenuRecentlyClosedTabs {
        --menu-image: url("container-tab.svg");
      }
    
      #appMenuClearRecentHistory {
        --menu-image: url("edit-delete.svg");
      }
    
      #appMenuRecentlyClosedWindows {
        --menu-image: url("window.svg");
      }
    
      #appMenuSearchHistory {
        --menu-image: url("search-glass.svg");
      }
    
    
      #downloads-button,
      #downloads-indicator-anchor {
      list-style-image: url("downloads.svg") !important;
      }
    
      
      #appMenu-settings-button {
        list-style-image: url("settings.svg") !important;
      }
    
    
      #library-button {
        list-style-image: url("library.svg") !important;
      }
      #home-button {
        list-style-image: url("home.svg") !important;
      }
      #add-ons-button,
      #unified-extensions-button {
        list-style-image: url("extension.svg") !important;
      }
      
      /* Textbox ContextMenu (2025.8.29 fix)*/
      menuitem[data-l10n-id="text-action-undo"] {
        --menu-image: url("edit-undo.svg");
      }
      menuitem[data-l10n-id="text-action-redo"] {
        --menu-image: url("edit-redo.svg");
      }
      menuitem[data-l10n-id="text-action-cut"] {
        --menu-image: url("edit-cut.svg");
      }
      menuitem[data-l10n-id="text-action-copy"] {
        --menu-image: url("edit-copy.svg");
      }
      menuitem[data-l10n-id="text-action-paste"] {
        --menu-image: url("edit-paste.svg");
      }
      menuitem[data-l10n-id="text-action-delete"] {
        --menu-image: url("edit-delete.svg");
      }
      menuitem[data-l10n-id="text-action-select-all"] {
        --menu-image: url("edit-select-all.svg");
      }

      /* —— —— Special icon for Zen —— —— */
      #zen-toolbar-context-tabs-right {
        --menu-image: url("tab-right.svg");
      }
      
      #context_zen-add-essential {
        --menu-image: url("essential-add.svg");
      }
      
      #context_zen-remove-essential {
        --menu-image: url("essential-remove.svg");
      }
      
      #context-zen-change-workspace-tab {
        --menu-image: url("move-tab.svg");
      }
      #context_zenSplitTabs,
      #context-zenSplitLink {
        --menu-image: url("split.svg");
      }
      #zenToolbarThemePicker {
        --menu-image: url("customize.svg");
      }
      #zen-context-menu-compact-mode,
      #zen-context-menu-compact-mode-toggle {
        --menu-image: url("compact-mode.svg");
      }

      #context_zen-reset-pinned-tab,
      #context_zen-replace-pinned-url-with-current {
        --menu-image: url("reload.svg");
      }
      #zen-context-menu-new-folder,
      #zen-context-menu-new-folder-toolbar {
        --menu-image: url("folder-add.svg");        
      }
    
    /* zen Workspace */
      #context_zenEditWorkspace {
        --menu-image: url("edit.svg");
      }
      #context_zenEditWorkspaceIcon {
        --menu-image: url("image-save.svg");
      }
      #context_zenChangeWorkspaceTheme {
        --menu-image: url("customize.svg");
      }
      #context_zenWorkspacesOpenInContainerTab {
        --menu-image: url("container-tab.svg");
      }
      #context_zenReorderWorkspaces {
        --menu-image: url("sort.svg");
      }
      menupopup#zenWorkspaceMoreActions > menuitem[data-l10n-id="zen-panel-ui-workspaces-create"] {
      /*
      menuitem[data-l10n-id="zen-panel-ui-workspaces-create"] {
      */
        --menu-image: url("plus.svg");
      }
      #context_zenDeleteWorkspace {
        --menu-image: url("edit-delete.svg");
      }

    /* zen Folder */
      #context_zenFolderRename {
        --menu-image: url("edit.svg");
      }
      #context_zenFolderChangeIcon {
        --menu-image: url("image-save.svg");
      }
      #context_zenFolderUnloadAll {
        --menu-image: url("edit-select-all.svg");
      }
      #context_zenFolderNewSubfolder {
        --menu-image: url("folder-add.svg");
      }
      #context_zenFolderUnpack {
        --menu-image: url("folder-unpack.svg");
      }
      #context_zenChangeFolderSpace {
        --menu-image: url("move-tab.svg");
      }
      #context_zenFolderToSpace,
      #convert-folder-to-group {
        --menu-image: url("folder_sync_convert.svg");
      }
      #context_zenFolderDelete {
        --menu-image: url("edit-delete.svg");
      }
    /* zen Group(Adapt to Advanced-Tag-Groups) */
      .change-group-color {
        --menu-image: url("color.svg");
      }
      .rename-group {
        --menu-image: url("edit.svg");
      }
      .ungroup-tabs {
        --menu-image: url("folder-unpack.svg");
      }
      .convert-group-to-folder {
        --menu-image: url("folder_sync_convert.svg");
      }
      .change-group-icon {
      --menu-image: url("image-save.svg");
    }


    /* zen Mods */
    #quicktabs-context-menuitem,
    #quicktabs-tab-context-menuitem {
      --menu-image: url("ext-link.svg");
    }
    #cmi-show-more-menu {
      --menu-image: url("menu-bar.svg");
    }
    
  }

  /*ZenUI*/
  @media (-moz-pref("cmi-Switch-Icon-Package", 2)) {
    :root {

        --zen-contextmenu-menuitem-padding-inline: 5px !important;
        --zen-contextmenu-menuicon-margin-inline: 3px !important;
        --zen-contextmenu-menuitem-margin: 0px 2px !important;
      }

      /* Adding icons back to regular context menu options */
      :not(:not(menubar) > menu, #ContentSelectDropdown)
      > menupopup
      > menuitem:not(
      .menuitem-iconic,
      [type='checkbox'],
      [type='radio'],
      .in-menulist,
      .in-menulist menuitem,
      .unified-nav-current
      ) {
        background-image: var(--menu-image) !important;
        background-size: 16px !important;
        background-position: var(--zen-contextmenu-menuitem-padding-inline) center !important;
        background-repeat: no-repeat !important;
        -moz-context-properties: fill, fill-opacity !important;
        fill: currentColor !important;
      }
      menuitem.sine-moved,
      menuitem[id$="-sine-clone"],
      menuitem[class*="sine"] {
        background-image: var(--menu-image) !important;
        background-size: 16px !important;
        background-position: var(--zen-contextmenu-menuitem-padding-inline) center !important;
        background-repeat: no-repeat !important;
        -moz-context-properties: fill, fill-opacity !important;
        fill: currentColor !important;
      }  

      /* Adding icons back to context menu options that has arrow */
      :not(:not(menubar) > menu, #ContentSelectDropdown)
      > menupopup > menu:not(
        .menu-iconic, [type='checkbox'], [type='radio'],
        .in-menulist, .in-menulist menu, .unified-nav-current
      ),
      #toggle_toolbar-menubar,
      #PanelUI-history toolbarbutton,
      #unified-extensions-context-menu menuitem {
        background-image: var(--menu-image) !important;
        background-size: 16px !important;
        background-position: var(--zen-contextmenu-menuitem-padding-inline) center !important;
        background-repeat: no-repeat !important;
        -moz-context-properties: fill, fill-opacity !important;
        fill: currentColor !important; 
      }
      

    /* Specifying icons to apply for options in Unified Extensions Menu */
    @media not (-moz-platform: linux) {

        .unified-extensions-context-menu-pin-to-toolbar {
          --menu-image: url('chrome://browser/skin/zen-icons/pin.svg');
        }
      }
      .unified-extensions-context-menu-move-widget-down {
        --menu-image: url('chrome://browser/skin/zen-icons/arrow-down.svg');
      }
      .unified-extensions-context-menu-move-widget-up {
        --menu-image: url('chrome://browser/skin/zen-icons/arrow-up.svg');
      }
    

    /* PART 7:  Specifying icons to apply for other context menu options */
    /* Use icons from Zen icon directory - chrome://browser/skin/zen-icons/ */
    /* Use icons from Firefox icon directory - chrome://browser/skin/ */
    
      #context_zenSplitTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/sidebars-right.svg') !important;
      }
      #context-zen-change-workspace-tab {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg') !important;
      }
      #context-zenSplitLink {
        --menu-image: url('chrome://browser/skin/zen-icons/split.svg') !important;
      }
      #context-previewlink {
      --menu-image: url('chrome://browser/skin/zen-icons/open.svg') !important;
    }
      #context_zenOpenWorkspace,
      #context_zenOpenWorkspacePanel {
        --menu-image: url('chrome://browser/skin/zen-icons/manage.svg') !important;
      }
      #context_zenEditWorkspaceIcon {
        --menu-image: url('chrome://browser/skin/zen-icons/canvas.svg') !important;
      }
      .zenToolbarThemePicker,
      #zenToolbarThemePicker {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-theme.svg') !important;
      }
      #context-video-pictureinpicture {
        --menu-image: url('chrome://browser/skin/zen-icons/media-pip.svg') !important;
      }
      #context-media-loop {
        --menu-image: url('chrome://browser/skin/zen-icons/media-loop.svg') !important;
      }
      
      #context-savepage {
        --menu-image: url('chrome://browser/skin/zen-icons/save.svg');
      }
      #context-selectall,
      menuitem[data-l10n-id="text-action-select-all"],
      #context_selectAllTabs,
      #toolbar-context-selectAllTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-select-all.svg');
      }
      #context-add-engine {
        --menu-image: url("search-add.svg");
      }
      #context-undo,
      menuitem[data-l10n-id="text-action-undo"],
      #context_undoCloseTab,
      #toolbar-context-undoCloseTab {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-undo.svg');
      }
      #toggle_toolbar-menubar {
        --menu-image: url('chrome://browser/skin/zen-icons/menu-bar.svg');
      }
      #context-redo,
      menuitem[data-l10n-id="text-action-redo"] {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-redo.svg');
      }
      #context-copy,
      menuitem[data-l10n-id="text-action-copy"],
      .textbox-contextmenu #strip-on-share,
      #placesContext_copy {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-copy.svg');
      }
      #context-paste,
      menuitem[data-l10n-id="text-action-paste"],
      #placesContext_paste_group,
      #placesContext_paste,
      #context-paste-no-formatting {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-paste.svg');
      }
      #context-cut,
      menuitem[data-l10n-id="text-action-cut"],
      #placesContext_cut {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-cut.svg');
      }
      #context-delete,
      .customize-context-removeExtension,
      .unified-extensions-context-menu-remove-extension,
      menuitem[data-l10n-id="text-action-delete"],
      menuitem[id='placesContext_deleteBookmark'],
      menuitem[id='placesContext_deleteFolder'],
      menuitem[id='placesContext_delete'],
      menuitem[id='placesContext_delete_history'],
      menuitem[id='placesContext_deleteHost'],
      #context_zenDeleteWebPanel,
      #context_zenDeleteWorkspace,
      #placesContext_removeTag {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-delete.svg');
      }
      #paste-and-go {
        --menu-image: url('chrome://browser/skin/zen-icons/paste-and-go.svg');
      }
      #context-print-selection {
        --menu-image: url('chrome://browser/skin/zen-icons/print.svg');
      }
      #spell-check-enabled {
        --menu-image: url("chrome://browser/skin/zen-icons/spell-check.svg");
      }
      #context-take-screenshot {
        --menu-image: url('chrome://browser/skin/zen-icons/screenshot.svg');
      }
      #context-viewsource {
        --menu-image: url('chrome://browser/skin/zen-icons/source-code.svg');
      }
      #context-inspect-a11y {
        --menu-image: url('chrome://browser/skin/zen-icons/accessibility.svg');
      }
      #context-inspect {
        --menu-image: url('chrome://browser/skin/zen-icons/inspect.svg');
      }
      #context-searchselect {
        --menu-image: url('chrome://browser/skin/zen-icons/search-glass.svg');
      }
      #context-searchselect-private {
        --menu-image: url('chrome://browser/skin/zen-icons/search-glass.svg');
      }
      #context-viewimage {
        --menu-image: url('chrome://browser/skin/zen-icons/image-open.svg');
      }
      #context-viewimageinfo {
        --menu-image: url('chrome://browser/skin/zen-icons/info.svg');
      }
      #context-saveimage,
      #context-video-saveimage {
        --menu-image: url('chrome://browser/skin/zen-icons/image-save.svg');
      }
      #context-savevideo {
        --menu-image: url('chrome://browser/skin/zen-icons/video-save.svg');
      }
      #context-viewvideo {
        --menu-image: url('chrome://browser/skin/zen-icons/video-open.svg');
      }
      #context-saveaudio {
        --menu-image: url('chrome://browser/skin/zen-icons/audio-save.svg');
      }
      #context-copyimage-contents {
        --menu-image: url('chrome://browser/skin/zen-icons/image-copy.svg');
      }
      #context-copyimage,
      #context-copyvideourl,
      #context-copylink,
      #context-stripOnShareLink,
      #context_zenOpenNewTabWebPanel,
      #context-pdfjs-copy {
        --menu-image: url('chrome://browser/skin/zen-icons/link.svg');
      }
      #context-openlinkincurrent {
        --menu-image: url('chrome://browser/skin/zen-icons/ext-link.svg');
      }
      #context-ask-chat {
        --menu-image: url('chrome://browser/skin/trending.svg');
      }
      #context-translate-selection,
      #appMenu-translate-button {
        --menu-image: url('chrome://browser/skin/zen-icons/translations.svg');
      }
      #translations-button-icon {
        background-position: center !important; 
        list-style-image:  url("chrome://browser/skin/zen-icons/translations.svg") !important;      
      }
    
      #context-viewsource,
      #context-viewframesource,
      #context-viewpartialsource-selection {
        --menu-image: url('chrome://browser/skin/zen-icons/source-code.svg');
      }
      #context-sendimage,
      #context-sendvideo,
      #context-sendaudio {
        --menu-image: url('chrome://browser/skin/zen-icons/mail.svg');
      }
      #context-setDesktopBackground,
      .viewCustomizeToolbar {
        --menu-image: url('chrome://browser/skin/zen-icons/customize.svg');
      }
      #context-reloadimage,
      #context_reloadTab,
      #context_reloadSelectedTabs,
      #toolbar-context-reloadSelectedTab,
      #toolbar-context-reloadSelectedTabs,
      #context_zen-reset-pinned-tab {
        --menu-image: url('chrome://browser/skin/zen-icons/reload.svg');
      }
      #context-sendlinktodevice,
      #context_sendTabToDevice,
      #context-sendpagetodevice {
        --menu-image: url('chrome://browser/skin/zen-icons/send-to-device.svg');
      }
      #context-openlinkintab,
      #context-openlinkincontainertab,
      #context_zenWorkspacesOpenInContainerTab,
      #context_zenWebPanelContextInContainer,
      menuitem[id='placesContext_open:newtab'],
      menuitem[id='placesContext_openLinks:tabs'],
      menuitem[id='placesContext_openBookmarkLinks:tabs'],
      menuitem[id='placesContext_openBookmarkContainer:tabs'],
      #placesContext_openContainer\:tabs {
        --menu-image: url('chrome://browser/skin/zen-icons/tab.svg');
      }
      #context_openANewTab,
      #toolbar-context-openANewTab {
        --menu-image: url('chrome://browser/skin/zen-icons/new-tab-image.svg');
      }
      #context-openlinkinusercontext-menu,
      menu[id='placesContext_open:newcontainertab'],
      menu[id='placesContext_openContainer:tabs'] {
        --menu-image: url('chrome://browser/skin/zen-icons/container-tab.svg');
      }
      #context-openlink,
      menuitem[id='placesContext_open:newwindow'] {
        --menu-image: url('chrome://browser/skin/zen-icons/window.svg');
      }
      #context-openlinkprivate,
      menuitem[id='placesContext_open:newprivatewindow'] {
        --menu-image: url('chrome://browser/skin/zen-icons/private-window.svg');
      }
      #context-savelink {
        --menu-image: url('chrome://browser/skin/zen-icons/downloads.svg');
      }
      #spell-add-to-dictionary,
      #spell-add-dictionaries,
      #spell-dictionaries {
        --menu-image: url('chrome://browser/skin/zen-icons/add-to-dictionary.svg');
      }
      #manage-saved-logins {
        --menu-image: url('chrome://browser/skin/zen-icons/passwords.svg');
      }
      #context-media-play,
      #context_playTab,
      #context_playSelectedTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/media-play.svg');
      }
      #context-media-pause {
        --menu-image: url('chrome://browser/skin/zen-icons/media-pause.svg');
      }
      #context-media-mute,
      #context_toggleMuteTab,
      #context_toggleMuteSelectedTabs,
      #context_zenToggleMuteWebPanel {
        --menu-image: url('chrome://browser/skin/zen-icons/media-mute.svg');
      }
      #context-media-unmute,
      #context_toggleMuteTab[muted],
      #context_toggleMuteSelectedTabs[muted],
      #context_zenToggleMuteWebPanel[muted] {
        --menu-image: url('chrome://browser/skin/zen-icons/media-unmute.svg');
      }
      #context-media-playbackrate {
        --menu-image: url('chrome://browser/skin/zen-icons/media-speed.svg');
      }
      #context-video-fullscreen {
        --menu-image: url('chrome://browser/skin/zen-icons/fullscreen.svg');
      }
      #context-leave-dom-fullscreen,
      menuitem[contexttype='fullscreen'][label*='Exit'] {
        --menu-image: url('chrome://browser/skin/zen-icons/fullscreen-exit.svg');
      }
      #context-media-hidecontrols,
      #context-media-showcontrols {
        --menu-image: url('chrome://browser/skin/zen-icons/permissions.svg');
      }
      #context_pinTab,
      #context_unpinTab,
      #context_pinSelectedTabs,
      #context_unpinSelectedTabs,
      .customize-context-moveToPanel,
      #context_zen-replace-pinned-url-with-current {
        --menu-image: url('chrome://browser/skin/zen-icons/pin.svg');
      }
      #context_zen-add-essential {
        --menu-image: url('chrome://browser/skin/zen-icons/essential-add.svg');
      }
      #context_zen-remove-essential {
        --menu-image: url('chrome://browser/skin/zen-icons/essential-remove.svg');
      }
      .customize-context-removeFromToolbar {
        --menu-image: url('chrome://browser/skin/zen-icons/unpin.svg');
      }
      #zen-sidebar-web-panel-pinned[pinned='true'] {
        list-style-image: url('chrome://browser/skin/zen-icons/pin.svg') !important;
      }
      #zen-sidebar-web-panel-pinned {
        list-style-image: url('chrome://browser/skin/zen-icons/unpin.svg') !important;
      }
      #context_duplicateTab,
      #context_duplicateTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/duplicate-tab.svg');
      }
      #zen-context-menu-compact-mode,
      #zen-context-menu-compact-mode-toggle {
        --menu-image: url('chrome://browser/skin/zen-icons/sidebar.svg');
      }
      #context_bookmarkTab,
      #context_bookmarkSelectedTabs,
      #toggle_PersonalToolbar,
      #context-bookmarklink,
      #toolbar-context-bookmarkSelectedTab,
      #toolbar-context-bookmarkSelectedTabs,
      #placesContext_createBookmark {
        --menu-image: url('chrome://browser/skin/zen-icons/bookmark-hollow.svg');
      }
      menuitem[id='placesContext_show_bookmark:info'],
      menuitem[id='placesContext_show_folder:info'],
      menuitem[id='placesContext_show:info'] {
        --menu-image: url('chrome://browser/skin/zen-icons/edit.svg');
      }
      menuitem[id='placesContext_showAllBookmarks'],
      #BMB_bookmarksShowAllTop,
      #BMB_bookmarksShowAll,
      .customize-context-manageExtension,
      .unified-extensions-context-menu-manage-extension {
        --menu-image: url('chrome://browser/skin/zen-icons/manage.svg');
      }
      #BMB_viewBookmarksSidebar {
        --menu-image: url('chrome://browser/skin/sidebars.svg');
      }
      #BMB_searchBookmarks {
        --menu-image: url('chrome://browser/skin/zen-icons/search-page.svg');
      }
      menuitem[id='placesContext_new:bookmark'],
      menuitem[id='placesContext_new:folder'],
      menuitem[id='placesContext_new:separator'],
      #newbookmark,
      #newfolder,
      #newseparator {
        --menu-image: url('chrome://browser/skin/zen-icons/plus.svg');
      }
      #context-savelinktopocket,
      #context-pocket {
        --menu-image: url('chrome://browser/skin/zen-icons/pocket-outline.svg');
      }
      #context_ungroupTab,
      #context_moveTabOptions {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
      }
      .share-tab-url-item {
        --menu-image: url('chrome://browser/skin/zen-icons/share.svg');
      }
      #context_moveTabToNewGroup,
      #context_moveTabToGroup,
      #context_reopenInContainer {
        --menu-image: url('chrome://browser/skin/zen-icons/container-tab.svg');
      }
      #context_closeTab,
      #context_closeDuplicateTabs,
      #orgClose {
        --menu-image: url('chrome://browser/skin/zen-icons/close.svg');
      }
      #context_closeTabOptions {
        --menu-image: url('chrome://browser/skin/zen-icons/close-all.svg');
      }
      #context_unloadTab,
      #context_zenUnloadWorkspace {
        --menu-image: url("data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22context-fill%22%20fill-opacity%3D%22context-fill-opacity%22%3E%3Cpath%20d%3D%22M5.154%2C2.633c.3755-.1748.8216-.012.9964.3635.1748.3755.012.8216-.3635.9964-1.8371.855-3.0367%2C2.6987-3.0367%2C4.7598%2C0%2C2.898%2C2.3504%2C5.2473%2C5.2498%2C5.2473s5.2498-2.3494%2C5.2498-5.2473c0-2.0569-1.1946-3.8974-3.0259-4.7548-.3751-.1756-.5368-.6221-.3613-.9972.1756-.3751.6221-.5368.9972-.3612%2C2.3537%2C1.102%2C3.8899%2C3.4688%2C3.8899%2C6.1132%2C0%2C3.7265-3.022%2C6.7473-6.7498%2C6.7473S1.2502%2C12.4793%2C1.2502%2C8.7527c0-2.65%2C1.5426-5.0208%2C3.9037-6.1197ZM8%2C.5c.3846%2C0%2C.7016.2895.7449.6625l.005.0875v5.2509c0%2C.4142-.3358.75-.75.75-.3846%2C0-.7016-.2895-.7449-.6625l-.005-.0875V1.25c0-.4142.3358-.75.75-.75Z%22%2F%3E%3C%2Fsvg%3E");
      }
      .customize-context-reportExtension,
      .unified-extensions-context-menu-report-extension {
        --menu-image: url('chrome://browser/skin/zen-icons/report.svg');
      }
      .wordmark::after {
        content: 'Plus' !important;
      }
    #placesContext_open {
      --menu-image: url('chrome://browser/skin/zen-icons/ext-link.svg');
    }
      #placesContext_sortBy\:name {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
      }
      /* zen Workspace */
      #context_zenEditWorkspace {
        --menu-image: url('chrome://browser/skin/zen-icons/edit.svg');
      }
      #context_zenEditWorkspaceIcon {
        --menu-image: url('chrome://browser/skin/zen-icons/canvas.svg');
      }
      #context_zenChangeWorkspaceTheme {
        --menu-image: url('chrome://browser/skin/zen-icons/customize.svg');
      }
      #context_zenWorkspacesOpenInContainerTab {
        --menu-image: url('chrome://browser/skin/zen-icons/tab.svg');
      }
      #context_zenReorderWorkspaces {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
      }
      menupopup#zenWorkspaceMoreActions > menuitem[data-l10n-id="zen-panel-ui-workspaces-create"] {
      /*
      menuitem[data-l10n-id="zen-panel-ui-workspaces-create"] {
      */
        --menu-image: url('chrome://browser/skin/zen-icons/plus.svg');
      }
      #context_zenDeleteWorkspace {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-delete.svg');
      }

    /* zen Folder */
      #context_zenFolderRename {
        --menu-image: url('chrome://browser/skin/zen-icons/edit.svg');
      }
      #context_zenFolderChangeIcon {
        --menu-image: url('chrome://browser/skin/zen-icons/canvas.svg');
      }
      #context_zenFolderUnloadAll {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-select-all.svg');
      }
      #zen-context-menu-new-folder,
      #zen-context-menu-new-folder-toolbar,      
      #context_zenFolderNewSubfolder,
      #placesContext_showInFolder {
        --menu-image: url('chrome://browser/skin/zen-icons/folder.svg');
      }
      #context_zenFolderUnpack {
        --menu-image: url('chrome://browser/skin/zen-icons/close-all.svg');
      }
      #context_zenChangeFolderSpace {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
      }
      #context_zenFolderToSpace,
      #convert-folder-to-group {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
      }
      #context_zenFolderDelete {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-delete.svg');
      }   

      #zen-toolbar-context-tabs-right {
        --menu-image: url('chrome://browser/skin/import.svg');
      }  
    /* zen Group(Adapt to Advanced-Tag-Groups) */
      .change-group-color {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-theme.svg');
      }
      .rename-group {
        --menu-image: url('chrome://browser/skin/zen-icons/edit.svg');
      }
      .ungroup-tabs {
        --menu-image: url('chrome://browser/skin/zen-icons/close-all.svg');
      }
      .convert-group-to-folder {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
      }
      .change-group-icon {
      --menu-image: url('chrome://browser/skin/zen-icons/canvas.svg');
     }
    
    /* zen Mods */
    #quicktabs-context-menuitem,
    #quicktabs-tab-context-menuitem {
      --menu-image: url('chrome://browser/skin/zen-icons/ext-link.svg');
    }
    #cmi-show-more-menu {
      --menu-image: url('chrome://browser/skin/zen-icons/menu.svg');
    }
    
  }
}  
  

/* Preferences */
@media not (-moz-pref("cmi-Disable-Better-Context-Menu",true)){

/* -------------------------- Better Context Menu -------------------------- */
  
:root {
    --tab-action-width: 25%;
    --tab-action-height: 42px;
}
  
/* Base Hover Styling for Menu Items */
:is(menu, menuitem):hover {
    border-radius: 12px !important;
}

/* Hide "New Tab" Option */
#context_openANewTab {
    display: none !important;
}

/* General Context Menu Layout */
#tabContextMenu {
    width: 280px !important;
}

/* menuseparator style */
menuseparator:first-of-type {
    display: none !important;
}
menuseparator::before {
    opacity: 0.3;
}

/* -------------------------- Tab button style -------------------------- */
#tabContextMenu :is(
    #context_reloadTab,
    #context_reloadSelectedTabs,
    #context_zen-add-essential,
    #context_zen-remove-essential,
    #context_pinTab,
    #context_unpinTab,
    #context_pinSelectedTabs,
    #context_unpinSelectedTabs,
    #context_bookmarkTab,
    #context_bookmarkSelectedTabs
) {
    order: -999 !important;
    width: var(--tab-action-width) !important;
    --height: var(--tab-action-height);
    height: var(--height) !important;

    position: relative;
    overflow: hidden;

    background-position: center !important;
    border-radius: 12px !important;
    transition: box-shadow 0.4s ease-in-out;
}

/* Hide menu text */
#tabContextMenu :is(
    #context_reloadTab,
    #context_reloadSelectedTabs,
    #context_zen-add-essential,
    #context_zen-remove-essential,
    #context_pinTab,
    #context_unpinTab,
    #context_pinSelectedTabs,
    #context_unpinSelectedTabs,
    #context_bookmarkTab,
    #context_bookmarkSelectedTabs
) .menu-text {
    display: none !important;
}

/* -------------------------- menu separator -------------------------- */
:where(
  #tabContextMenu:has(:is(#context_reloadTab, #context_reloadSelectedTabs):not([hidden])):has(:is(
    #context_pinTab, #context_unpinTab, #context_bookmarkTab,
    #context_pinSelectedTabs, #context_unpinSelectedTabs, #context_bookmarkSelectedTabs
  ):not([hidden]))
) > :nth-child(1 of menuseparator) {
  display: flex !important;
  visibility: visible !important;
  order: -1 !important; /* Only retain the order for direct child elements. */
}

:where(
  #tabContextMenu:has(:is(#context_reloadTab, #context_reloadSelectedTabs):not([hidden])):has(:is(
    #context_pinTab, #context_unpinTab, #context_bookmarkTab,
    #context_pinSelectedTabs, #context_unpinSelectedTabs, #context_bookmarkSelectedTabs
  ):not([hidden]))
) :nth-child(1 of menuseparator) {
  display: flex !important;
  visibility: visible !important;
}


/* Main rule */
/* 1) 单 Tab（含 zen-add/zen-remove）—— 原始：pin margin-left:25% */
#tabContextMenu:has(#context_reloadTab:not([hidden])):has(:is(#context_zen-add-essential,#context_zen-remove-essential):not([hidden])):has(:is(#context_pinTab,#context_unpinTab,#context_bookmarkTab):not([hidden])) {
    /* 单项定位覆盖：保留与原规则一致的 margin */
    #context_reloadTab { margin-left: 0 !important; }
    :is(#context_pinTab, #context_unpinTab) {
        margin-left: 25% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
    #context_zen-remove-essential { margin-left: 37.5% !important; margin-top: calc(0px - var(--height)) !important; }
    #context_zen-add-essential { margin-left: 50% !important; margin-top: calc(0px - var(--height)) !important; }
    #context_bookmarkTab { margin-left: 75% !important; margin-top: calc(0px - var(--height)) !important; }
}

/* 2) 多 Tab 选中（含 zen-add/zen-remove）—— 与 1) 等价布局（复用同样的偏移） */
#tabContextMenu:has(#context_reloadSelectedTabs:not([hidden])):has(:is(#context_zen-add-essential,#context_zen-remove-essential):not([hidden])):has(:is(#context_pinSelectedTabs,#context_unpinSelectedTabs,#context_bookmarkSelectedTabs):not([hidden])) {
    #context_reloadSelectedTabs { margin-left: 0 !important; }
    :is(#context_pinSelectedTabs, #context_unpinSelectedTabs) {
        margin-left: 25% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
    /* zen-add/zen-remove 使用同一 ID，因此不重复列出 "Selected" 变体 */
    #context_zen-remove-essential { margin-left: 37.5% !important; margin-top: calc(0px - var(--height)) !important; }
    #context_zen-add-essential { margin-left: 50% !important; margin-top: calc(0px - var(--height)) !important; }
    #context_bookmarkSelectedTabs { margin-left: 75% !important; margin-top: calc(0px - var(--height)) !important; }
}

/* 3) TabGroup（不包含 zen-add/zen-remove 在排列时的占位）—— pin margin-left:37.5% */
#tabContextMenu:has(#context_reloadTab:not([hidden])):has(:is(#context_pinTab,#context_unpinTab,#context_bookmarkTab):not([hidden])) {
    #context_reloadTab { margin-left: 0 !important; }
    :is(#context_pinTab, #context_unpinTab) {
        margin-left: 37.5% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
    #context_bookmarkTab { margin-left: 75% !important; margin-top: calc(0px - var(--height)) !important; }
}

/* 4) TabGroup 且多选（pinSelected margin-left:37.5%） */
#tabContextMenu:has(#context_reloadSelectedTabs:not([hidden])):has(:is(#context_pinSelectedTabs,#context_unpinSelectedTabs,#context_bookmarkSelectedTabs):not([hidden])) {
    #context_reloadSelectedTabs { margin-left: 0 !important; }
    :is(#context_pinSelectedTabs, #context_unpinSelectedTabs) {
        margin-left: 37.5% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
    #context_bookmarkSelectedTabs { margin-left: 75% !important; margin-top: calc(0px - var(--height)) !important; }
}

/* -------------------------- Gradient Animation Base（::before & :hover） -------------------------- */
#tabContextMenu :is(
    #context_reloadTab,
    #context_reloadSelectedTabs,
    #context_zen-add-essential,
    #context_zen-remove-essential,
    #context_pinTab,
    #context_unpinTab,
    #context_pinSelectedTabs,
    #context_unpinSelectedTabs,
    #context_bookmarkTab,
    #context_bookmarkSelectedTabs
)::before {
    content: "";
    position: absolute;
    inset: 2px;
    border-radius: 12px !important;
    clip-path: inset(-1 round 12px);
    pointer-events: none;

    background: linear-gradient(
        45deg,
        color-mix(in srgb, var(--zen-primary-color) 5%, black),
        color-mix(in srgb, var(--zen-primary-color) 20%, black),
        color-mix(in srgb, var(--zen-primary-color) 50%, black),
        color-mix(in srgb, var(--zen-primary-color) 90%, black),
        color-mix(in srgb, var(--zen-primary-color) 50%, black),
        color-mix(in srgb, var(--zen-primary-color) 15%, black)
    );

    background-size: 400% 400%;
    filter: blur(10px) brightness(1);
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
}

/* Hover Activates Gradient Effect */
#tabContextMenu :is(
    #context_reloadTab,
    #context_reloadSelectedTabs,
    #context_zen-add-essential,
    #context_zen-remove-essential,
    #context_pinTab,
    #context_unpinTab,
    #context_pinSelectedTabs,
    #context_unpinSelectedTabs,
    #context_bookmarkTab,
    #context_bookmarkSelectedTabs
):hover::before {
    opacity: 0.5;
    animation-play-state: running;
}

@keyframes tab-hover-gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}


/* Hover Activates Gradient Effect */
#context_reloadTab:hover::before,
:is(#context_zen-add-essential, #context_zen-remove-essential):hover::before,
:is(#context_pinTab, #context_unpinTab):hover::before,
#context_bookmarkTab:hover::before {
    opacity: 0.5;
    animation-play-state: running;
}

@keyframes tab-hover-gradient {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

}


/* Hide the inactive items in Context Menu */
@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
@media (-moz-pref("cmi-Hide-Inactive-Items-TabContextMenu")) {
  #tabContextMenu > menuitem[disabled]:not(:is(
    #context_zen-add-essential,
    #context_zen-remove-essential,
    #context_zenSplitTabs
  )) {
    visibility: collapse !important;
  }
  #tabContextMenu:has(> menuitem#context_reloadTab:not([hidden]))
    > menuitem#context_zenSplitTabs {
      visibility: collapse !important;
  }
}
@media (-moz-pref("cmi-Hide-Inactive-Items-ContentAreaContextMenu")) {
  #contentAreaContextMenu > menuitem[disabled]
  {
    visibility: collapse !important;
  }
}


@media (-moz-pref("cmi-Grayscale-Extensions-Icons")){

  .menu-icon:not(.bookmark-item .menu-icon):not(toolbarbutton.bookmark-item .menu-icon) {
    fill: var(--arrowpanel-icon-color) !important;
    filter: grayscale(100%) invert(100%) brightness(150%);
  }
}

  /* Align the icons of the extension with those of CMI */
  /* ==== 1. 声明命名空间 & 作用域 ==== */
@-moz-document url-prefix("chrome://browser/content/browser.xhtml") {
  @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
  @media (
    -moz-pref("cmi-Align-Extension-Icons")
  ) {
  /* ==== 2. 自定义变量（方便后续统一调整） ==== */
  :root {
    /* 图标上下边距（图标与上下菜单项之间） */
    --zen-cmenu-icon-margin-block: 2px !important;
    /* 图标固定尺寸（保证所有图标同高同宽） */
    --zen-cmenu-icon-size: 16px !important;
  }

  /* ==== 3. 针对所有上下文菜单项中的图标 ==== */
  menupopup > menuitem > .menu-icon,
  menupopup > menu > .menu-icon {
    /* 固定图标大小 */
    width: var(--zen-cmenu-icon-size);
    height: var(--zen-cmenu-icon-size);

    /* 调整外边距：左、右、上下 */
    margin-inline-start: var(--zen-cmenu-icon-margin-inline-start);
    margin-inline-end: var(--zen-cmenu-icon-margin-inline-end);
    margin-block-start: var(--zen-cmenu-icon-margin-block);
    margin-block-end: var(--zen-cmenu-icon-margin-block);

    /* 内边距保持 0（图标本身不要额外内边距） */
    padding: 0 !important;
  }

  /* ==== 4. 文本也向右推进，和图标保持间距一致 ==== */
  menupopup > menuitem .menu-text,
  menupopup > menu .menu-text {
    padding-inline-start: 0 !important; /* 重置可能已有的内边距 */
    margin-inline-start: 0 !important;  /* 重置可能已有的外边距 */
    /* 让文字紧贴图标右侧 */
    padding-inline-start: var(--zen-cmenu-icon-margin-inline-end);
  }
    }
}

/*  Preference of Bookmark Toolbar Style */
@media (-moz-pref("cmi-Center-Bookmark-Items")){
  #PlacesToolbarItems {
    justify-content: center !important; 
  }
}
/* Hide Folder Icons */
@media (-moz-pref("cmi-Hide-Folder-Icons")){
  .bookmark-item[container="true"] .toolbarbutton-icon {
    display: none;
  }
}
/* Hide Favcons */
@media (-moz-pref("cmi-Hide-Bookmark-Element", 1)) or (-moz-pref("cmi-Hide-Bookmark-Element", 3)) {
  .bookmark-item:not([container]) .toolbarbutton-icon {
    display: none;
  }
}
/* Hide Bookmark Names */
@media (-moz-pref("cmi-Hide-Bookmark-Element", 2)) or (-moz-pref("cmi-Hide-Bookmark-Element", 3)) {
  #personal-bookmarks .bookmark-item:not([container]) .toolbarbutton-text {
    display: none !important;
  }
}

@media (-moz-pref("cmi-Hide-OAiT-Item")){
  .openintabs-menuitem,
  menuseparator.bookmarks-actions-menuseparator {
    display: none;
  }
}
/* Auto Hide Bookmark Toolbar */
/* Incorporated this feature into the CMI in v2.2 */
/* This was a feature that I had liked on Firefox even before I switched to Zen. 
However, I found that the implementation method of "Bookmark Toolbar Tweaks" is better. However, it has some bugs and no longer works on the new version of Zen.
So, I fixed these bugs and improved the visual effects of the original code, making them look more modern and attractive. */
/* Disabled in the compact mode to prevent conflicts. */
@media (not (-moz-pref("cmi-Auto-Hide-BookmarkBar", 0))) {
  @media (not ((-moz-pref("zen.view.compact.hide-toolbar")) and (-moz-pref("zen.view.compact.enable-at-startup"))))  {

  @media (-moz-pref("cmi-bookmarks-theme-transparent")) {
    #PersonalToolbar:not([customizing]) {
      background-color: var(--zen-colors-tertiary) !important;
    }
  }

  @media (not (-moz-pref("cmi-bookmarks-theme-transparent"))) {
    #personal-bookmarks toolbarbutton.bookmark-item:not(#OtherBookmarks) {
      border-radius: 11px !important;
      background-color: light-dark(rgba(255,255,255,0.45), rgba(0,0,0,0.55)) !important;
      height: 24px;
    }
  }

  /* Adapt for firefox */
  @media (-moz-pref("cmi-AHB-Firefox")) {
  #navigator-toolbox {
    z-index: 3 !important;
    border-bottom: 0 !important;
  }
  }
  /* Adapt for Zen (Since zen v1.17.1) */
  #navigator-toolbox {
    height: calc(100% - (var(--zen-element-separation) * 4.5)) !important;
  }
  /* Bookmark bar Style */  
  #personal-bookmarks
    #PlacesToolbarItems
    > toolbarbutton.bookmark-item:not(
      .subviewbutton,
      [disabled="true"],
      [open]
    ):hover {
      border-radius: 11px !important;
      scale: 1.05 !important;
  }

  #personal-bookmarks
    #PlacesToolbarItems
    > toolbarbutton.bookmark-item:not(
      .subviewbutton,
      [disabled="true"]
    ):hover:active {
      border-radius: 11px !important;
      scale: 1.05 !important;  
      filter: brightness(1.5);
  }

  #personal-bookmarks
    #PlacesToolbarItems
    > toolbarbutton.bookmark-item[open="true"] {
      border-radius: 11px !important;
      scale: 1.05 !important;  
      filter: brightness(1.5);
  }
  

  /* 常态下隐藏书签栏,并禁止书签栏影响网页交互 */
  #PersonalToolbar {
    /* 关键：使用绝对定位脱离文档流 */
    position: absolute !important;

  @media (-moz-pref("cmi-AHB-Firefox")) {
    top: 100% !important; 
  }      
    
    left: 0 !important;
    right: 0 !important;
    z-index: 1 !important;
  
     /* 初始隐藏状态 */
    opacity: 0 !important;
    transform: translateY(-10px) !important;
    pointer-events: none !important; /* 允许穿透点击到网页 */
    transition:
      opacity 300ms ease-out,
      transform 300ms ease-out !important;
  }

  #PersonalToolbar:has([open]),
  #PersonalToolbar:has([aria-expanded="true"]),
  #PersonalToolbar:has(menupopup[open]),
  #PersonalToolbar:has(menu[open]),
  #PersonalToolbar:has(.bookmark-item[open]),
  #nav-bar:hover + #PersonalToolbar,
  #PersonalToolbar:hover,
  #PersonalToolbar:focus-within {
  /* 同时恢复可见性与交互，兼容 translateY / rotateX 两种动画变换 */
  opacity: 1 !important;
  transform: translateY(0) rotateX(0deg) !important;
  pointer-events: auto !important;
  /* 立即恢复交互，避免面板在重新进入时失去事件响应 */
  transition-delay: 0s !important;
  }
    
  /* 恢复书签栏 */
  /* Expand the bookmarks toolbar by hovering */
  @media (-moz-pref("cmi-Auto-Hide-BookmarkBar", 1)) or (-moz-pref("cmi-Auto-Hide-BookmarkBar", 3)) {
    #nav-bar:hover + #PersonalToolbar,
    #PersonalToolbar:hover {
      opacity: 1 !important;
      transform: translateY(0) !important;
      pointer-events: auto !important; /* 恢复交互能力 */
      
      /* 添加轻微延迟避免误触发 */
      transition-delay: 0.1s !important;
    }
  }
}

  /* Expand the bookmarks toolbar when you search */
  @media (-moz-pref("cmi-Auto-Hide-BookmarkBar", 2)) or (-moz-pref("cmi-Auto-Hide-BookmarkBar", 3)) {
    #nav-bar:focus-within + #PersonalToolbar {
      opacity: 1 !important;
      transform: translateY(0) !important;
      pointer-events: auto !important;
    }
  }
}


@media (-moz-pref("cmi-Display-Firefox-Logo", true)) or (-moz-pref("cmi-Switch-Icon-Package", 1)) {
#identity-popup[connection="chrome"] .identity-popup-security-connection,
#identity-box[pageproxystate="valid"].chromeUI #identity-icon {
        list-style-image: url("firefox.svg") !important;
      }
}
/* Shift the text to the right to make room for the custom icon.*/

:root {
  --fp-contextmenu-menuicon-margin-inline: 12px;
  --fp-contextmenu-menuitem-padding-inline: 10px;
  --fp-arrowpanel-menuicon-margin-inline: 14px;
}

menu > .menu-iconic-text,
menuitem > .menu-iconic-text,
#context-navigation > .menuitem-iconic::after {
  padding-inline-start: var(--fp-contextmenu-menuicon-margin-inline) !important;
}

/* 校正容器标签页菜单 */
menupopup#new-tab-button-popup,
menupopup#zenWorkspaceMoreActions menupopup {
/* 普通菜单项 & 子菜单容器，排除图标项、已勾选复选/单选、已分组和高亮项 */
> :is(menuitem, menu):not(
    .menuitem-iconic,
    .menu-iconic,

    [type="checkbox"][checked="true"],
    [type="radio"][checked="true"],

    .in-menulist,
    .in-menulist menuitem,
    .in-menulist menu,
    .unified-nav-current
  ),
/* 分组标题 */
> menucaption {
  padding-inline-start: var(--container-padding) !important;
}
}


/* ---------------------------
   通用规则：在两种 media 条件下都使用这些选择器，
   但实际数值来源于上面对应 media 中设定的变量
   ---------------------------*/

/* 将两种 media 合并，用逗号连接（当任意一个条件成立时应用下列通用样式） */
@media (not (-moz-pref("cmi-Switch-Icon-Package", 0)))
  and (not (-moz-pref("cmi-Switch-Icon-Package", 2))),
  (-moz-pref("cmi-Switch-Icon-Package", 2)) {
/* ========== 全局：此规则用来去除原生“√”图标，方便给特殊菜单插入自定义图标,并更容易完成上下文菜单的文本对齐（v1.9.4 new change) */
/* This rule is used to remove the native "√" icon, making it convenient to insert custom icons for special menus and facilitating the text alignment of context menus.（v1.9.4) */
:is(menuitem[type="checkbox"], menuitem[type="radio"]):not([checked="true"]) {
  /* 背景图转换已有的变量 --menu-image */
  background-image: var(--menu-image) !important;
  background-repeat: no-repeat !important;
  
  @media (not (-moz-pref("cmi-Switch-Icon-Package", 0))) and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) {background-position: var(--fp-contextmenu-menuitem-padding-inline, left 1em) center !important;}
  @media (-moz-pref("cmi-Switch-Icon-Package", 2)) {background-position: 5px center !important;}
  
  background-size: var(--fp-contextmenu-menuitem-icon-size, 16px) !important;

  /* 让 SVG 能够使用 currentColor */
  -moz-context-properties: fill, fill-opacity !important;
  fill: currentColor !important;
/*
  padding-inline-start: unset !important;
  padding-left: unset !important;
*/
}


/* ========== 隐藏内建占位节点，防止"√"占位显示 ==========（Only fix for v1.9.4b)  */
:is(menuitem[type="checkbox"], menuitem[type="radio"]) > .menu-icon,
:is(menuitem[type="checkbox"], menuitem[type="radio"]) > .menu-iconic-left,
:is(menuitem[type="checkbox"], menuitem[type="radio"]) > .menu-iconic {
  display: none !important;
  width: 0 !important;
  margin-inline-start: 0 !important;
  padding: 0 !important;
  opacity: 0 !important;
}

/* ========== 勾选时：移除背景图 ========== （Only fix for v1.9.4b) */
:is(menuitem[type="checkbox"], menuitem[type="radio"])[checked="true"] {
  background-image: none !important;
  /* 保持不触碰间距 */
  padding-inline-start: unset !important;
  padding-left: unset !important;
}

/* —— 屏蔽对子菜单项的影响 —— */
/* —— 全局：禁止任意子菜单继承图标（适用于多层嵌套） —— */
menupopup menupopup{
  --menu-image: initial !important;
  background-image: none !important;
}


  /* 1. 只排除顶栏菜单和文字选取下拉
     2. 排除下载管理器菜单 / create-new / new-tab 弹出
     3. 排除：已勾选复选/单选、带图标、menulist 内的、unified-nav-current
  */
  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup,#new-tab-button-popup,#zenSiteDataActions)
    > menuitem:not(
      .openintabs-menuitem,

      .menuitem-iconic,
      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],
      .in-menulist,
      .in-menulist menuitem,
      .unified-nav-current
      ),
  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup,#new-tab-button-popup,#zenSiteDataActions)
    > menu:not(
      .openintabs-menuitem,

      .menu-iconic,
      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],
      .in-menulist,
      .in-menulist menu,
      .unified-nav-current
      ),
  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup,#new-tab-button-popup,#zenSiteDataActions)
    > menucaption {
      padding-inline-start: calc(
        var(--fp-contextmenu-menuitem-padding-inline)
        + var(--menuitem-padding-extra)
        + var(--fp-contextmenu-menuicon-margin-inline)
      ) !important;
  }


  #cmi-show-more-menupopup > menuitem:not(
    .openintabs-menuitem,
    .menuitem-iconic,
    [type="checkbox"][checked="true"],
    [type="radio"][checked="true"],
    .in-menulist,
    .in-menulist menuitem,
    .unified-nav-current
  ),
  #cmi-show-more-menupopup > menu:not(
    .openintabs-menuitem,
    .menu-iconic,
    [type="checkbox"][checked="true"],
    [type="radio"][checked="true"],
    .in-menulist,
    .in-menulist menu,
    .unified-nav-current
  ),
  #cmi-show-more-menupopup > menucaption {
  padding-inline-start: calc(
    var(--fp-contextmenu-menuitem-padding-inline)
    + var(--menuitem-padding-extra)
    + var(--fp-contextmenu-menuicon-margin-inline)
  ) !important;
}

  /* 设置自定义 checkmark 图标（使用变量：可在两种模式间切换实现方式） */
  menupopup > menuitem[type="checkbox"][checked="true"]::before,
  menupopup > menuitem[type="radio"][checked="true"]::before {
    content: "" !important;
    display: inline-block;
    width: var(--checkmark-width);
    height: var(--checkmark-height);

    margin-inline-end: var(--checkmark-margin-end);
    vertical-align: middle;

    /* 两种实现共用声明：background-image / mask / background-color 由变量决定 */
    background-image: var(--checkmark-bg-image);
    -moz-context-properties: var(--checkmark-moz-context) !important;
    /* 当使用 SVG fill 时，保留 fill 的回退值 */
    fill: var(--checkmark-fill, currentColor) !important;
    background-repeat: no-repeat;
    background-size: contain;
    /* 定位到图标所在 x 位置 */
    margin-inline-start: var(--checkmark-margin-start);
    position: relative;

    /* mask 与 background-color（若变量为 none，则效果等同于未设置） */
    -webkit-mask: var(--checkmark-mask, none);
    mask: var(--checkmark-mask, none);
    background-color: var(--checkmark-bg-color, transparent);
  }

@media (not (-moz-pref("cmi-Switch-PC-Platform", 2))) {
  /* —— 当满足以下任意条件时，给所有子项统一添加内边距 —— */
  :is(
    /* 书签栏 */
    menupopup#placesContext:has(> menuitem:not([hidden])[checked="true"]),
    /* 工具栏 */
    menupopup#toolbar-context-menu:has(> menuitem:not([hidden])[checked="true"]),
    /* 标签栏 */
    menupopup#tabContextMenu:has(> menuitem:not([hidden])[checked="true"]),
    /* 当循环或PIP勾选时 */
    menupopup#contentAreaContextMenu:has(> menuitem:not([hidden])[checked="true"]),
    /* 当拼写检查勾选 */
    menupopup#contentAreaContextMenu:has(> menuitem#spell-check-enabled:is([checked="true"])),
    /* 扩展菜单 */
    menupopup#unified-extensions-context-menu:has(> menuitem:not([hidden])[checked="true"]),
    /* 当下载菜单有项目勾选 */
    menupopup#downloadsContextMenu:has(> menuitem:not([hidden])[checked="true"]),
    /* 浏览器内置翻译器菜单 */
    menupopup#full-page-translations-panel-settings-menupopup:has(> menuitem:not([hidden])[checked="true"])
  ) {
    --checkmark-margin-start: var(--checkmark-margin-start_cover);
    --checkmark-margin-end: var(--checkmark-margin-end_cover);
    --submenu-padding: var(--submenu-padding_cover);
    /* 普通菜单项 & 子菜单容器，排除图标项、已勾选复选/单选、已分组和高亮项 */
    > :is(menuitem, menu):not(
        .menuitem-iconic,
        .menu-iconic,

        [type="checkbox"][checked="true"],
        [type="radio"][checked="true"],

        .in-menulist,
        .in-menulist menuitem,
        .in-menulist menu,
        .unified-nav-current
      ),
      > :is(menuitem, menu):not(
        .menuitem-iconic,
        .menu-iconic,

        [type="checkbox"][checked="true"],
        [type="radio"][checked="true"],

        .in-menulist,
        .in-menulist menuitem,
        .in-menulist menu,
        .unified-nav-current
      ),
    /* 分组标题 */
    > menucaption {
      padding-inline-start: var(--group-padding) !important;
    }
  }
}
/* Linux */
@media (-moz-pref("cmi-Switch-PC-Platform", 2)) {
  /* —— 当满足以下任意条件时，给所有子项统一添加内边距 —— */
  :is(
    /* 书签栏 */
    menupopup#placesContext:has(> menuitem:not([hidden])[type="checkbox"]),
    /* 工具栏 */
    menupopup#toolbar-context-menu:has(> menuitem:not([hidden])[type="checkbox"]),
    /* 标签栏 */
    menupopup#tabContextMenu:has(> menuitem:not([hidden])[type="checkbox"]),
    /* 当循环或PIP勾选时 */
    menupopup#contentAreaContextMenu:has(> menuitem:not([hidden])[type="checkbox"]),
    /* 当拼写检查勾选 */
    menupopup#contentAreaContextMenu:has(> menuitem#spell-check-enabled:is([checked="true"])),
    /* 扩展菜单 */
    menupopup#unified-extensions-context-menu:has(> menuitem:not([hidden])[type="checkbox"]),
    /* 当下载菜单有项目勾选 */
    menupopup#downloadsContextMenu:has(> menuitem:not([hidden])[type="checkbox"]),
    /* 浏览器内置翻译器菜单 */
    menupopup#full-page-translations-panel-settings-menupopup:has(> menuitem:not([hidden])[type="checkbox"])
  ) {
    --checkmark-margin-start: var(--checkmark-margin-start_cover);
    --checkmark-margin-end: var(--checkmark-margin-end_cover);
    --submenu-padding: var(--submenu-padding_cover);
      @media (not (-moz-pref("cmi-Switch-Icon-Package", 0))) and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) { --submenu-padding: var(--submenu-padding_cover); !important; }
      @media (-moz-pref("cmi-Switch-Icon-Package", 2)) { --submenu-padding: calc(var(--submenu-padding_cover) - 8px) !important; }
    /* 普通菜单项 & 子菜单容器，排除图标项、已勾选复选/单选、已分组和高亮项 */
    > :is(menuitem, menu):not(
        .menuitem-iconic,
        .menu-iconic,

        [type="checkbox"][checked="true"],
        [type="radio"][checked="true"],

        .in-menulist,
        .in-menulist menuitem,
        .in-menulist menu,
        .unified-nav-current
      ),
    /* 分组标题 */
    > menucaption {
      @media (not (-moz-pref("cmi-Switch-Icon-Package", 0))) and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) { padding-inline-start: calc(var(--group-padding) + 4px) !important; }
      @media (-moz-pref("cmi-Switch-Icon-Package", 2)) { padding-inline-start: calc(var(--group-padding) - 4px) !important; }
    }
  }
}

/* =========================================================
   全局：同一 menupopup 中若存在任一未隐藏且已勾选的 checkbox，
   则对同一 menupopup 中其它未隐藏的 checkbox 菜单项应用 padding(fix for v1.9.4)
   可选：可以在上面的 menuitem 选择器里加上 :not(.menuitem-iconic) 进行排除“图标样式”的 menuitem（例如 .menuitem-iconic）。也许后面可能需要这个排除（？）
   ========================================================= */
@media (not (-moz-pref("cmi-Switch-PC-Platform", 2))) {
/* 当 menupopup 下有被勾选的 checkbox 或 radio 时，
给同层级未勾选的 checkbox 子项增加 padding */
menupopup:has(> menuitem:is([type="checkbox"], [type="radio"]):not([hidden])[checked="true"])
> menuitem[type="checkbox"]:not([hidden]):not([checked="true"])
> .menu-text,
menupopup:has(> menuitem:is([type="checkbox"], [type="radio"]):not([hidden])[checked="true"])
> menuitem[type="checkbox"]:not([hidden]):not([checked="true"])
> .menu-highlightable-text {
padding-inline-start: var(--Non-checkmark-subitems-padding) !important;
box-sizing: border-box !important;
}


/* 当 menupopup 下有被勾选的 checkbox 或 radio 时，
给同层级未勾选且不是父菜单的 checkbox 子项增加 padding */
menupopup:has(> menuitem:is([type="checkbox"], [type="radio"]):not([hidden])[checked="true"])
> menuitem[type="checkbox"]:not([hidden]):not([checked="true"]):not(:has(menupopup))
> .menu-text,
menupopup:has(> menuitem:is([type="checkbox"], [type="radio"]):not([hidden])[checked="true"])
> menuitem[type="checkbox"]:not([hidden]):not([checked="true"]):not(:has(menupopup))
> .menu-highlightable-text {
padding-inline-start: var(--Non-checkmark-subitems-padding) !important;
box-sizing: border-box !important;
}
}

/* Linux */
@media (-moz-pref("cmi-Switch-PC-Platform", 2)) {
/* 严格版本（适用于两者为同一 menupopup 的直接子项）*/
menupopup:has(> menuitem:is([type="checkbox"], [type="radio"]):not([hidden]))
  > menuitem[type="checkbox"]:not([hidden]):not([checked="true"])
  > .menu-text,
menupopup:has(> menuitem[type="checkbox"]:not([hidden]))
  > menuitem[type="checkbox"]:not([hidden]):not([checked="true"])
  > .menu-highlightable-text {

  @media (not (-moz-pref("cmi-Switch-Icon-Package", 0))) and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) { padding-inline-start: calc(var(--Non-checkmark-subitems-padding) - 4px) !important; }
  @media (-moz-pref("cmi-Switch-Icon-Package", 2)) { padding-inline-start: var(--Non-checkmark-subitems-padding) !important; }

  box-sizing: border-box !important;
}

/* 当某个直接子项 checkbox 被勾选且未隐藏时，给同一层级的其它直接子项 checkbox（未隐藏、未被勾选、且不是父菜单）增加 padding */
menupopup:has(> menuitem:is([type="checkbox"], [type="radio"]):not([hidden]))
  > menuitem[type="checkbox"]:not([hidden]):not([checked="true"]):not(:has(menupopup))
  > .menu-text,
menupopup:has(> menuitem:is([type="checkbox"], [type="radio"]):not([hidden]))
  > menuitem[type="checkbox"]:not([hidden]):not([checked="true"]):not(:has(menupopup))
  > .menu-highlightable-text {

  @media (not (-moz-pref("cmi-Switch-Icon-Package", 0))) and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) { padding-inline-start: calc(var(--Non-checkmark-subitems-padding) - 4px) !important; }
  @media (-moz-pref("cmi-Switch-Icon-Package", 2)) { padding-inline-start: var(--Non-checkmark-subitems-padding) !important; }

  box-sizing: border-box !important;
}
}


/* 子菜单文本对齐（Only fix for v1.9.4b) —— padding 值由变量控制 */
menupopup:not(#spell-dictionaries-menu,#viewColumns > menupopup):has(
    menuitem:not([hidden])[type="checkbox"][checked="true"],
    menuitem:not([hidden])[type="radio"][checked="true"]
  ) {
  > :is(menuitem, menu):not(
      .menuitem-iconic,
      .menu-iconic,

      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],

      .in-menulist,
      .in-menulist menuitem,
      .in-menulist menu,
      .unified-nav-current
    ),
  /* 分组标题 */
  > menucaption {
    padding-inline-start: var(--submenu-padding) !important;
  }
}
#spell-dictionaries-menu,#viewColumns > menupopup:has(
  menuitem:not([hidden])[type="checkbox"][checked="true"],
  menuitem:not([hidden])[type="radio"][checked="true"]
) {
    > :is(menuitem, menu):not(
      .menuitem-iconic,
      .menu-iconic,

      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],

      .in-menulist,
      .in-menulist menuitem,
      .in-menulist menu,
      .unified-nav-current
    ),
  /* 分组标题 */
  > menucaption {
    padding-inline-start: var(--special-submenu-padding) !important;
  }
}
}

/*Main Menu*/
.widget-overflow-list .toolbarbutton-1:not(.toolbarbutton-combined) > .toolbarbutton-text,
.subviewbutton:not(#appMenu-zoom-controls > .subviewbutton) > .toolbarbutton-icon + .toolbarbutton-text,
#appMenu-fxa-label2 > vbox {
  padding-inline-start: var(--fp-arrowpanel-menuicon-margin-inline) !important;
}

#appMenu-zoom-controls > .toolbarbutton-text,
#fxa-manage-account-button > vbox,
#PanelUI-fxa-menu-syncnow-button > hbox {
  padding-inline-start: calc(16px + var(--fp-arrowpanel-menuicon-margin-inline)) !important;
}


/* This is used to temporarily solve the problem where the "history" icons that Zen has not yet removed overlap with the added custom icons. */
#appMenuRecentlyClosedTabs,
#appMenuRecentlyClosedWindows,
#appMenuSearchHistory,
#appMenuClearRecentHistory,
#PanelUI-historyMore{
  --menu-image: none;
}